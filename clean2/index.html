<!doctype html>
<html lang="sv">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Barnl책ten St채dlista</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<style>
body { background:#f5f9fc; }
input[type=checkbox] { transform:scale(1.3); margin-right:8px; }
@media print {
  .no-print { display:none; }
  body { background:white; }
}
</style>
</head>
<body class="container py-4">

<h1 class="mb-3">Barnl책ten St채dlista</h1>

<div class="no-print mb-3">
  <div class="btn-group mb-2">
    <button class="btn btn-primary" id="sv">Svenska</button>
    <button class="btn btn-outline-secondary" id="en">English</button>
  </div>
  <div class="btn-group mb-2">
    <button class="btn btn-primary" id="vardag">Vardag</button>
    <button class="btn btn-outline-secondary" id="helg">Helg</button>
  </div>
  <button id="clear" class="btn btn-outline-secondary">Rensa alla bockar</button>
</div>

<div id="list" class="bg-white p-3 rounded shadow-sm"></div>

<script>
let lang = 'sv';
let mode = 'vardag';

function loadList(){
  const file = `${mode}_${lang}.md`;
  fetch(file)
    .then(r => r.text())
    .then(md => {
      document.getElementById('list').innerHTML = marked.parse(md);
      restoreChecks();
      enableAutoSave();
    });
}

function enableAutoSave(){
  document.querySelectorAll('input[type=checkbox]').forEach((cb,i)=>{
    cb.addEventListener('change',()=>{
      const key = `${mode}_${lang}_${i}`;
      localStorage.setItem(key, cb.checked);
    });
  });
}

function restoreChecks(){
  document.querySelectorAll('input[type=checkbox]').forEach((cb,i)=>{
    const key = `${mode}_${lang}_${i}`;
    cb.checked = localStorage.getItem(key) === 'true';
  });
}

document.getElementById('sv').onclick=()=>{lang='sv';loadList();};
document.getElementById('en').onclick=()=>{lang='en';loadList();};
document.getElementById('vardag').onclick=()=>{mode='vardag';loadList();};
document.getElementById('helg').onclick=()=>{mode='helg';loadList();};

document.getElementById('clear').onclick=()=>{
  document.querySelectorAll('input[type=checkbox]').forEach(cb=>cb.checked=false);
  Object.keys(localStorage).forEach(k=>{ if(k.startsWith(mode+"_"+lang)) localStorage.removeItem(k); });
};

loadList();
</script>
</body>
</html>
